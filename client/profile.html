<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="/styles/base.css">
    <link rel="stylesheet" href="/styles/layout.css">
    <link rel="stylesheet" href="/styles/profile.css">
</head>

<body>
<div class="site-container">

    <!-- HEADER -->
        <header class="header">
            <a href="/" class="logo-button">ДЕЛЬТА</a>
            <p class="nav-link">Внутренний портал</p>
            <div class="header-buttons">
                <a href="notifications.html" class="action-button">Уведомления</a>
                <a href="profile.html" class="action-button">Профиль</a>
            </div>
        </header>

    <!-- MAIN -->
    <main class="main-content">
            <section class="page-title-section">
                <h1 class="page-title">Профиль</h1>
            </section>
        <form id="profileForm" class="profile-form">

            <label>
                ФИО
                <input type="text" id="fullname" disabled>
            </label>

            <label>
                Телефон
                <input type="text" id="phone" disabled>
            </label>

            <label>
                Email
                <input type="email" id="email" disabled>
            </label>

            <label>
                Должность
                <input type="text" id="position" disabled>
            </label>

            <label>
                Роль
                <input type="text" id="role" disabled>
            </label>

            <label>
                Логин
                <input type="text" id="username" disabled>
            </label>

            <label>
                Пароль
                <input type="password" value="********" disabled>
            </label>

            <button type="button" id="logoutBtn">
                Выйти
            </button>

        </form>

    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-column footer-left">
            <a href="privacy.doc" download class="privacy-link">Политика конфиденциальности</a>
        </div>

        <div class="footer-column footer-center">
            <nav class="footer-nav">
                    <a href="index.html" class="footer-nav-button">Главная</a>
                    <a href="/tasks" class="footer-nav-button">Задачи</a>
                    <a href="documents.html" class="footer-nav-button">Документы</a>
                    <a href="contacts.html" class="footer-nav-button">Контакты</a>
                    <a href="profile.html" class="footer-nav-button">Профиль</a>
                    <a href="apanel.html" class="footer-nav-button">А-панель</a>
            </nav>
        </div>

        <div class="footer-column footer-right">
            <h3 class="footer-title">Политика</h3>
                <p class="footer-text">2025 © Все права защищены. Внутренние стандарты безопасности и конфиденциальности.</p>
        </div>
    </footer>

</div>

<script>
async function loadProfile() {
    const res = await fetch('/api/profile');
    if (!res.ok) {
        location.href = '/login';
        return;
    }
    const user = await res.json();

    fullname.value = user.fullname;
    phone.value = user.phone;
    email.value = user.email;
    position.value = user.position;
    role.value = user.role;
    username.value = user.username;
}

document.getElementById('logoutBtn').onclick = async () => {
    await fetch('/api/logout', { method: 'POST' });
    location.href = '/login';
};

loadProfile();
</script>

</body>
</html>
